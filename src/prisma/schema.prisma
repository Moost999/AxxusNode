  generator client {
    provider = "prisma-client-js"
  }

  datasource db {
    provider = "sqlite"
    url      = "file:./newdb.db"
  }

  model User {
    id                String   @id @default(uuid())
    name              String
    email             String   @unique
    tokens            Int      @default(0)
    availableMessages Int      @default(0)
    createdAt         DateTime @default(now())
    updatedAt         DateTime @updatedAt
    assistants        Assistant[]
  }

  model Assistant {
    id              String   @id @default(uuid())
    name            String
    model           String
    personality     String
    instructions    String
    whatsappNumber  String?
    createdAt       DateTime @default(now())
    updatedAt       DateTime @updatedAt
    userId          String
    user            User     @relation(fields: [userId], references: [id])
    conversations   Conversation[]
  }

  model Conversation {
    id           String   @id @default(uuid())
    assistantId  String
    assistant    Assistant @relation(fields: [assistantId], references: [id])
    messages     Message[]
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt
  }

  model Message {
    id             String   @id @default(uuid())
    conversationId String
    conversation   Conversation @relation(fields: [conversationId], references: [id])
    content        String
    role           String
    createdAt      DateTime @default(now())
  }

  model PreConfiguredPrompt {
    id              String   @id @default(uuid())
    type            String   @unique
    instructions    String
    createdAt       DateTime @default(now())
    updatedAt       DateTime @updatedAt
  }